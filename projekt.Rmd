---
title: "Analiza nogometnih tekem v TOP 5 ligah"
author: "Tine Markočič"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```


## Izbira teme
V analizi sem si v 5 najmočnjejših evropskih nogometnih ligah ogledal zadnje sezone 18/19, 19/20, in 20/21. Slednja velja za korona sezono, ko so se tekme igrale pred praznimi tribunami. Zanimalo me je kako se posamezne lige razlikujejo med sabo po številu zadetkov na tekmo ter kako se je to spremenilo, ko se je igrali pred praznimi tribunami. Hkrati me je zanimal tudi uspeh ekip na domačem igrišču v teh različnih sezonah. Podrobneje sem si ogledal razplete derbijev v vsaki ligi, za derbi sem vpošteval, da sta med sabo igrali ekipi, ki sta uvrščeni med top 6 ekip. 


Slika!!!

## Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz.r", encoding="UTF-8")
```
Za vsako sezono v posamezni ligi sem na spretni strani <https://www.transfermarkt.com/> pridobil podatke o rezultatih v posameznem krogu in jih združil v skupno tabelo oblike CSV, ki sem jo uvozil v R. V tabeli sem izbrisal stolpce `dan`, `datum` in `ura` ter dodal stolpca s podatki o osvojenih točkah domačih in gostov. Prečiščene podatke sem shranil v tabelo `tabela_tekem` s stoplci:

-   `kolo` - številska spremenljivka z vrednostmi 1-38
-   `lestvica_domaci` - položaj domače ekipe na lestvici, vrednosti 1-20
-   `domaca_ekipa` - ime domače ekipe
-   `lestvica_gostje` - položaj gostujoče ekipe na lestvici, vrednosti 1-20
-   `gostujoca_ekipa` - ime gostujoče ekipe
-   `zadetki_domaci` - število zadetkov, ki jih je dosegla domača ekipa, vrednosti 0-9
-   `zadetki_gostje` - število zadetkov, ki jih je dosegla gostujoča ekipa, vrednosti 0-9
-   `drzava` - država v kateri se igra liga
-   `sezona` - letnica začetka sezone, vrednosti 18-20

Podrobneje me je zanimala Angleška Premier Liga, zato sem za klube, ki so v njej nastopali v izbranih sezonah, uvozil še podatke o stadionih, na katerih igrajo. Stadione sem uvozil iz Wikipedije, na naslovu <https://en.wikipedia.org/wiki/List_of_football_stadiums_in_England>, v obliki HTML, in shranil v tabelo `stadioni` s stolpci:

-   `Stadion` - ime stadiona
-   `Mesto` - mesto, v katerem se stadion nahaja
-   `Kapaciteta` - število sedežev na stadionu, vrednosti 10000-80000
-   `Ekipa` - Ekipa, ki igra nas stadionu domače tekme



## Analiza in vizualizacija podatkov

```{r vizualizacija, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```

***

## Napredna analiza podatkov

```{r analiza}
source("analiza/analiza.r", encoding="UTF-8")
```

***

```{r shiny}
#shinyAppDir("shiny", options=list(width="100%", height=600))
```
